<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Giddy@ Products</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    body {
      background: #f4f4f4;
      font-family: 'Segoe UI', sans-serif;
      padding-top: 70px;
    }
    .navbar {
      background: #fff;
      padding: 8px 0;
      border-bottom: 1px solid #ddd;
    }
    .navbar-brand {
      padding: 5px 15px;
    }
    .navbar-brand img {
      margin-right: 6px;
    }
    .navbar-form {
      margin-top: 5px;
    }
    .navbar-form .form-control,
    .navbar-form .btn {
      height: 32px;
      font-size: 13px;
    }
    .navbar-nav > li > a {
      padding-top: 10px !important;
      padding-bottom: 10px !important;
      font-size: 13px;
    }
    .dropdown-menu > li > a {
      font-size: 13px;
      padding: 6px 12px;
    }
    .product-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 20px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .product-card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 8px;
    }
    .product-card h5 {
      font-size: 15px;
      margin: 0 0 5px;
    }
    .product-card p {
      font-size: 12px;
      color: #666;
    }
    .product-price {
      font-size: 14px;
      font-weight: bold;
      color: #f60;
    }
    .btn-warning {
      background-color: #f60;
      border: none;
      padding: 6px 10px;
      font-size: 12px;
    }
    .btn-warning:hover {
      background: #000;
    }
    .section-title {
  font-size: 28px;
  font-weight: bold;
  color: #f60; 
  margin-top: 30px;
  margin-bottom: 25px;
  position: relative;
  display: inline-block;
  padding-bottom: 10px;
}

.section-title::after {
  content: '';
  width: 60%;
  height: 3px;
  position: absolute;
  bottom: 0;
  text-align: center;
  border-radius: 2px;
}

.category-scroll {
  overflow-x: auto;
  white-space: nowrap;
  padding: 10px;
  background-color: #f9f9f9;
}

.category-btn {
  display: inline-block;
  margin: 5px 8px;
  padding: 8px 15px;
  border: none;
  background-color: #e6e6e6;
  color: #555;
  font-size: 14px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.category-btn:hover {
  background-color: #f60;
}

.category-btn.active {
  background-color: #d9534f;
  color: white;
}
.product-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
  transition: all 0.3s ease;
}
.product-card img:hover {
  transform: scale(1.05);
  transition: transform 0.3s ease;
}

#quickViewModal .modal-header {
  background-color: #f60;
  color: #fff;
}
#quickViewModal .modal-body h4 {
  font-weight: bold;
  color: #333;
}
#quickViewModal .modal-body .img-responsive {
  border: 1px solid #ddd;
  border-radius: 6px;
}
#quickViewModal .modal-body .related-title {
  font-size: 14px;
  margin-top: 15px;
  margin-bottom: 5px;
  color: #f60;
  font-weight: bold;
}
.related-products {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.related-products img {
  height: 60px;
  width: 60px;
  object-fit: cover;
  border-radius: 4px;
  border: 1px solid #ddd;
  cursor: pointer;
  transition: transform 0.2s ease;
}
.related-products img:hover {
  transform: scale(1.1);
}
    footer {
      font-size: 12px;
    }
    .footer-top {
      background: #000;
      color: #fff;
      padding: 25px 10px;
    }
    .footer-bottom {
      background: #111;
      color: #aaa;
      padding: 20px 10px;
    }
    .footer-bottom ul {
      padding: 0;
      list-style: none;
    }
    .footer-bottom a {
      color: #aaa;
      text-decoration: none;
    }
    .footer-bottom a:hover {
      color: #f60;
    }
    .footer-bottom .text-center p {
      margin: 5px 0;
    }
    #showMoreBtn {
  margin-bottom: 15px;
}

    @media (max-width: 767px) {
        .product-card {
    margin-bottom: 15px;
  }
      .product-card img {
        height: 140px;
      }
      .product-card h5 {
        font-size: 14px;
      }
      .product-card p {
        font-size: 11px;
      }
      .product-price {
        font-size: 13px;
      }
    }
  </style>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
<a class="navbar-brand" href="dashboard.html" style="display: flex; align-items: center;">
  <img src="Classic.png" width="30" height="30" alt="" style="margin-right: 8px;">
  <div style="line-height: 1;">
    <span style="color: orange; font-size: 16px; font-weight: bold;">Giddy</span><br>
    <small class="text-muted" style="font-size: 11px;">Affordable Online Shopping</small>
  </div>
</a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mainNavbar">
        <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
      </button>
    </div>
    <div class="collapse navbar-collapse" id="mainNavbar">
     <form class="navbar-form navbar-left" id="searchForm" style="width: 60%;">
        <div class="input-group" style="width: 100%;">
          <input type="text" class="form-control" placeholder="Search products, brands and categories">
          <span class="input-group-btn">
            <button class="btn btn-warning" type="submit">Search</button>
          </span>
        </div>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span> Account <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#">My Account</a></li>
            <li><a href="#">Orders</a></li>
            <li><a href="#">Logout</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-question-sign"></span> Help <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Place your Order</a></li>
            <li><a href="#">Payments</a></li>
            <li><a href="#">Returns</a></li>
            <li><a href="#">Warranty</a></li>
            <li><a href="#" style="background: orange; color: white; text-align: center;">Live Chat</a></li>
          </ul>
        </li>
        <li>
          <a href="carts.html">
            <span class="glyphicon glyphicon-shopping-cart"></span> Cart
            <span class="badge" id="cart-count">0</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
<h4 class="section-title text-center">
  <i class="fa fa-shopping-bag text-primary"></i> Giddy's Products
</h4>
<div class="category-scroll text-center">
  <button class="category-btn active" onclick="filterByCategory('')">All</button>
  <button class="category-btn" onclick="filterByCategory('Electronics')">Electronics</button>
  <button class="category-btn" onclick="filterByCategory('Electronics & Appliances')">Electronics & Appliances</button>
  <button class="category-btn" onclick="filterByCategory('Office Products')">Office Products</button>
  <button class="category-btn" onclick="filterByCategory('Automotive')">Automotive</button>
  <button class="category-btn" onclick="filterByCategory('Sports & Outdoors')">Sports & Outdoors</button>
  <button class="category-btn" onclick="filterByCategory('Toys & Games')">Toys & Games</button>
  <button class="category-btn" onclick="filterByCategory('Kids & Baby Products')">Kids & Baby Products</button>
  <button class="category-btn" onclick="filterByCategory('Shoes')">Shoes</button>
</div>
  <div class="row" id="product-list" style="margin-top: 20px;"></div>
  <div class="text-center" style="margin-top: 20px;">
  <button id="showMoreBtn" class="btn btn-primary">Show More</button>
</div>

</div>
<div id="quickViewModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Product Quick View</h4>
      </div>
      <div class="modal-body" id="quickViewBody">
  
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<footer>
  <div class="footer-top text-center">
    <h4>Classic <span style="color: orange;">@</span></h4>
    <p>Subscribe to our newsletter for the latest updates!</p>
    <form class="form-inline">
      <input type="email" class="form-control input-sm" placeholder="Enter E-mail Address" required>
      <button type="submit" class="btn btn-warning btn-sm">Subscribe</button>
    </form>
  </div>
  <div class="footer-bottom">
    <div class="row">
      <div class="col-sm-4">
        <h5>Need Help?</h5>
        <ul><li><a href="#">Chat with Us</a></li><li><a href="#">Help Center</a></li><li><a href="#">Contact Us</a></li></ul>
      </div>
      <div class="col-sm-4">
        <h5>About Classic@</h5>
        <ul><li><a href="#">About Us</a></li><li><a href="#">Careers</a></li></ul>
      </div>
      <div class="col-sm-4">
        <h5>Make Money With Us</h5>
        <ul><li><a href="#">Sell on Classic@</a></li><li><a href="#">Vendor Portal</a></li></ul>
      </div>
    </div>
    <hr>
    <div class="text-center">
      <p>&copy; 2025 Classic@. All rights reserved.</p>
      <p><a href="#">Kenya</a> | <a href="#">Ghana</a> | <a href="#">Egypt</a> | <a href="#">Uganda</a></p>
    </div>
  </div>
</footer>

<script>
  document.getElementById("searchForm").addEventListener("submit", function (e) {
  e.preventDefault();
  const keyword = this.querySelector("input").value.trim().toLowerCase();
  fetch("get_products.php")
    .then(response => response.json())
    .then(products => {
      const filtered = products.filter(product =>
        product.name.toLowerCase().includes(keyword) ||
        product.description.toLowerCase().includes(keyword) ||
        product.category?.toLowerCase().includes(keyword)
      );
      renderProducts(filtered);
    });
});
//Categories
  function filterByCategory(category) {
    fetch("get_products.php?category=" + encodeURIComponent(category))
      .then(res => res.json())
      .then(renderProducts);
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.classList.remove('active');
      if (btn.textContent.trim() === category || (category === '' && btn.textContent.trim() === 'All')) {
        btn.classList.add('active');
      }
    });
  }
    $(document).ready(function(){
    $(".category-btn").click(function(){
      $(".category-btn").removeClass("active btn-danger");
      $(this).addClass("active btn-danger");
    });
  });
  //
document.addEventListener("DOMContentLoaded", () => {
  fetch("get_products.php")
    .then(response => response.json())
    .then(products => renderProducts(products))
    .catch(error => console.error("Failed to load products:", error));
});

function filterByCategory(category) {
  fetch("get_products.php?category=" + encodeURIComponent(category))
    .then(response => response.json())
    .then(renderProducts);
}

function renderProducts(products) {
  const container = document.getElementById("product-list");
  container.innerHTML = "";

  products.forEach(product => {
    const discountBadge = product.discount_percent > 0
      ? `<span class="badge" style="background: red; position: absolute; top: 5px; left: 5px;">-${product.discount_percent}%</span>`
      : '';

    const priceDisplay = product.discount_percent > 0
      ? `<p class="product-price">
           <del>Ksh ${parseFloat(product.price).toFixed(2)}</del>
           <span style="color:red;"> Ksh ${(product.price * (1 - product.discount_percent / 100)).toFixed(2)}</span>
         </p>`
      : `<p class="product-price">Ksh ${parseFloat(product.price).toFixed(2)}</p>`;

    container.innerHTML += `
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
      <div class="product-card position-relative" style="margin-bottom: 20px;">
        ${discountBadge}
        <img src="${product.image_url}" alt="${product.name}" class="img-responsive" style="max-height:180px;">
        <h5 style="margin-top:10px;">${product.name}</h5>
        ${priceDisplay}
        <p style="font-size: 12px; color: #666;">${product.description.substring(0, 80)}...</p>
        <p style="font-size: 12px;"><strong>Stock:</strong> ${product.stock_quantity}</p>
        <p style="font-size: 12px;"><strong>Status:</strong> ${product.status}</p>
        <div class="btn-group btn-group-sm">
          <button class="btn btn-warning" onclick='addToCart(${JSON.stringify(product)})'>Add to Cart</button>
          <button class="btn btn-default" onclick='buyNow(${JSON.stringify(product)})'>Buy Now</button>
        </div>
        <button class="btn btn-link btn-xs" onclick='openQuickView(${JSON.stringify(product)})'>Quick View</button>
      </div>
    </div>`;
  });
}


function buyNow(product) {
  localStorage.setItem("checkoutProduct", JSON.stringify(product));
  window.location.href = "checkout.html";
}

function openQuickView(product) {
  localStorage.setItem("quickViewProduct", JSON.stringify(product));
  window.location.href = "quickview.html";
}


function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}
function addToCart(product) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const index = cart.findIndex(item => item.id === product.id);
  if (index !== -1) {
    cart[index].quantity += 1;
  } else {
    product.quantity = 1;
    cart.push(product);
  }
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartCount();
  alert(`${product.name} added to cart!`);
}
function updateCartCount() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let count = cart.reduce((sum, item) => sum + parseInt(item.quantity || 1), 0);
  const badge = document.getElementById("cart-count");
  if (badge) {
    badge.innerText = count;
  }
}
document.addEventListener("DOMContentLoaded", updateCartCount);
//show more
  $(document).ready(function() {
    $(".product-card").hide();
    $(".product-card").slice(0, 6).show();

    $("#showMoreBtn").click(function(e) {
      e.preventDefault();
      $(".product-card:hidden").slice(0, 6).slideDown();
      if ($(".product-card:hidden").length == 0) {
        $("#showMoreBtn").fadeOut();
      }
    });
  });
</script>
</body>
</html>
